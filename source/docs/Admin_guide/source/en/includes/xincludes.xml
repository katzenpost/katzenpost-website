<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
                 "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"
[ 
<!ENTITY % shared-content SYSTEM "shared-content.ent">
    %shared-content;
]>

<!--Using these includes multiple times in a document creats problems with ID duplication, breaking validation. 
This group of includes is fashioned to have block-level wrappers that do not reference an ID. To invoke them, I
instead use the "XPointer element() Scheme", which permits me to reference them using a DOM-like address. The result 
is quite fragile. The order of the includes cannot be changed without also changing the xpointer configurations in the 
documents where they occur.

References:

XPointer element() Scheme: 
https://www.w3.org/TR/2003/REC-xptr-element-20030325/
https://en.wikipedia.org/wiki/XPointer#Positional_element_addressing

Practical guidance on address syntax: 
https://stackoverflow.com/questions/16563106/how-to-use-xpointer-with-xinclude-to-reference-elements
https://github.com/tomschr/xpointer-example

From Wikipedia:

<foobar id="foo">
  <bar/>
  <baz>
    <bom a="1"/>
  </baz>
  <bom a="2"/>
</foobar>

results as the following examples:

 xpointer(id("foo")) => foobar
 xpointer(/foobar/1) => bar
 xpointer(//bom) => bom (a=1), bom (a=2)
 element(/1/2/1) => bom (a=1) (/1 descend into first element (foobar),
                               /2 descend into second child element (baz),
                               /1 select first child element (bom))

In these documents, we reference items in THIS FILE as follows:

    <xi:include  
        href="includes/xincludes.xml"
        xpointer="element(/1/7)"  
        xmlns:xi="http://www.w3.org/2001/XInclude" />
        
This means, "Descend into the first element (chapter), then descend into its seventh direct child element (<simplesect>),
which happens to be the serverdebug include include below. Calling /1/7 returns all content of that <simplesect>
element recursively. I have to depend on comment tags to keep track of what is what.

-->


<!-- 
    
TOC (with element number)

serverconfig (/1/2)
logging (/1/3)
sphinxgeometry (/1/4)
management (/1/5)
pki (/1/6)
serverdebug (/1/7)

-->

<chapter id="xincludes">
    <title id="xincludes.title">XIncludes repository</title>
    
<!-- 1. serverconfig (/1/2) -->
    <simplesect>
        <title></title>
        <!--https://github.com/katzenpost/katzenpost/blob/c255fbbf421d5d9820553c18dc5dc6c9881ad547/server/config/config.go#L84-->
        <!--The config code varies by role so it is not included in this entity.-->       
        <informalexample> 
            <itemizedlist>
                <listitem>
                    <para><emphasis role="bold">Identifier</emphasis></para>
                    <para>Specifies the human-readable identifier for a node, and must be unique per mixnet. 
                        Identifier can be an FQDN but does not have to be.</para>
                    <para>Type: string</para>
                    <para>Required: Yes</para>
                </listitem>
                
                &WireKEM;
                
                <listitem>
                    <para><emphasis role="bold">PKISignatureScheme</emphasis></para>
                    <para>Specifies the cryptographic signature scheme which will be used by all components of the mix network 
                        when interacting with the PKI system. Mix nodes sign their descriptors using this signature scheme, and 
                        dirauth nodes similarly sign PKI documents using this signature scheme.</para>
                    <para>The following signature schemes are supported:
                        "ed25519", "ed448", "Ed25519 Sphincs+", "Ed448-Sphincs+", "Ed25519-Dilithium2", "Ed448-Dilithium3"
                    </para>
                    <para>Type: string</para>
                    <para>Required: Yes</para>
                </listitem>
                
                <listitem>
                    <para><emphasis role="bold">Addresses</emphasis></para>
                    <para>Specifies a list of one or more Address URLs in a format that contains the transport protocol, 
                        IP address, and port number that the server will bind to for incoming connections. EchoMix supports 
                        URLs with that start with either "tcp://" or "quic://" such as: ["tcp://192.168.1.1:30001"] and 
                        ["quic://192.168.1.1:40001"].</para>
                    <para>Type: []string</para>
                    <para>Required: Yes</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">BindAddresses</emphasis></para>
                    <para>BindAddresses are listener addresses that the server will bind to and accept connections on.
                        These addresses are not advertised in the PKI.</para>
                    <para>Type: bool</para>
                    <para>Required: No</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">MetricsAddress</emphasis></para>
                    <para>MetricsAddress is the address/port to bind the Prometheus metrics
                        endpoint to.</para>
                    <para>Type: string</para>
                    <para>Required: No</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">DataDir</emphasis></para>
                    <para>DataDir is the absolute path to the directory authority server state directory
                        where persistence.db will be written to disk and
                        where the servers&apos; cryptographic key materials
                        will be written to disk when the serrver is started with the "-g" commmand-line option.</para>
                    <para>Type: string</para>
                    <para>Required: Yes</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">IsGatewayNode</emphasis></para>
                    <para>IsGatewayNode specifies if the server is a gateway or not.</para>
                    <para>Type: bool</para>
                    <para>Required: No</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">IsServiceNode</emphasis></para>
                    <para>IsServiceNode specifies if the server is a service node or not.</para>
                    <para>Type: bool</para>
                    <para>Required: No</para>
                </listitem>
            </itemizedlist>
            
        </informalexample>
    </simplesect>

<!-- logging (/1/3) -->

    <simplesect>
        <title></title>
        <!--https://github.com/katzenpost/katzenpost/blob/c255fbbf421d5d9820553c18dc5dc6c9881ad547/authority/voting/server/config/config.go#L78-->
        <informalexample> 
            <para>The logging configuration section controls logging behavior across &program_name;.</para>
            <programlisting>[Logging]
                Disable = false
                File = "katzenpost.log"
                Level = "INFO"</programlisting>
            <itemizedlist>
                <listitem>
                    <para><emphasis role="bold">Disable</emphasis></para>
                    <para>Disables logging if set to <emphasis role="bold"
                        >true</emphasis>.</para>
                    <para>Type: bool</para>
                    <para>Required: No</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">File</emphasis></para>
                    <para>Specifies the log file. If omitted, stdout is used.</para>
                    <para>An absolute or relative file path can be specified. A relative path is 
                    relative to the DataDir specified in the Server section of the 
                    configuration.</para>
                    <para>Type: string</para>
                    <para>Required: No</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Level</emphasis></para>
                    <para>Supported logging level values are ERROR | WARNING | NOTICE |INFO | DEBUG.</para>
                    <para>Type: string</para>
                    <para>Required: No</para>
                    <warning>
                        <para>The DEBUG log level is unsafe for
                            production use.</para>
                    </warning>                               
                </listitem>
            </itemizedlist>   
        </informalexample>
    </simplesect> 
    
<!-- sphinxgeometry (/1/4) -->
    
    <simplesect>
        <title></title>
        <!--https://github.com/katzenpost/katzenpost/blob/c255fbbf421d5d9820553c18dc5dc6c9881ad547/core/sphinx/geo/geo.go#L40-->
        <informalexample>        
            <para/>
            <programlisting>[SphinxGeometry]
                PacketLength = 3082
                NrHops = 5
                HeaderLength = 476
                RoutingInfoLength = 410
                PerHopRoutingInfoLength = 82
                SURBLength = 572
                SphinxPlaintextHeaderLength = 2
                PayloadTagLength = 32
                ForwardPayloadLength = 2574
                UserForwardPayloadLength = 2000
                NextNodeHopLength = 65
                SPRPKeyMaterialLength = 64
                NIKEName = "x25519"
                KEMName = ""</programlisting>
            <itemizedlist>
                <listitem>
                    <para><emphasis role="bold">PacketLength</emphasis></para>
                    <para>Specifies the length of a Sphinx packet in bytes.</para>
                    <para>Type: int</para>
                    <para>Required: Yes</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">NrHops</emphasis></para>
                    <para>Specifies the number of hops a Sphinx packet takes through the mixnet. 
                        This determines the size</para>
                    <para>of the packet header.</para>
                    <para>Type: int</para>
                    <para>Required: Yes</para>
                </listitem>                    
                <listitem>
                    <para><emphasis role="bold">HeaderLength</emphasis></para>
                    <para>Specifies the length of the Sphinx packet header in bytes.</para>
                    
                    <para>Type: int</para>
                    <para>Required: Yes</para>
                </listitem>                    
                <listitem>
                    <para><emphasis role="bold">RoutingInfoLength</emphasis></para>
                    <para>Specifies the length of the routing information portion of the S
                        phinx packet header.</para>
                    <para>Type: int</para>
                    <para>Required: Yes</para>
                </listitem>                    
                <listitem>
                    <para><emphasis role="bold">PerHopRoutingInfoLength</emphasis></para>
                    <para>Specifies the length of the per-hop routing information 
                        in the Sphinx packet header.</para>
                    <para>Type: int</para>
                    <para>Required: Yes</para>
                </listitem>                    
                <listitem>
                    <para><emphasis role="bold">SURBLength</emphasis></para>
                    <para>Specifies the length of a single-use reply block (SURB).</para>
                    <para>Type: int</para>
                    <para>Required: Yes</para>
                </listitem>                    
                <listitem>
                    <para><emphasis role="bold">SphinxPlaintextHeaderLength</emphasis></para>
                    <para>Specifies the length of the plaintext Sphinx packet header.</para>
                    <para>Type: int</para>
                    <para>Required: Yes</para>
                </listitem>                    
                <listitem>
                    <para><emphasis role="bold">PayloadTagLength</emphasis></para>
                    <para>Specifies the length of the payload tag.</para>
                    <para>Type: int</para>
                    <para>Required: Yes</para>
                </listitem>                    
                <listitem>
                    <para><emphasis role="bold">ForwardPayloadLength</emphasis></para>
                    <para>Specifies the size of the payload.</para>
                    <para>Type: int</para>
                    <para>Required: Yes</para>
                </listitem>                    
                <listitem>
                    <para><emphasis role="bold">UserForwardPayloadLength</emphasis></para>
                    <para>Specifies the size of the usable payload.</para>
                    <para>Type: int</para>
                    <para>Required: Yes</para>
                </listitem>       
                <listitem>
                    <para><emphasis role="bold">NextNodeHopLength</emphasis></para>
                    <para>NextNodeHopLength is derived from the largest routing-information 
                        block that we expect to encounter. Other packets have 
                        NextNodeHop + NodeDelay sections, or a Recipient section, both of which
                        are shorter.</para>
                    <para>Type: int</para>
                    <para>Required: Yes</para>
                </listitem>  
                <listitem>
                    <para><emphasis role="bold">SPRPKeyMaterialLength</emphasis></para>
                    <para>Specifies the length of the SPRP key.</para>
                    <para>Type: int</para>
                    <para>Required: Yes</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">NIKEName</emphasis></para>
                    <para>Specifies the name of the non-interactive key exchange (NIKE)
                    scheme used by Sphinx packets.</para>
                    <para>NIKEName and KEMName are mutually exclusive.</para>
                    <para>Type: string</para>
                    <para>Required: Yes</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">KEMName</emphasis></para>
                    <para>Specifies the name of the key encapsulation mechanism (KEM) used by Sphinx
                        packets.</para>
                    <para>NIKEName and KEMName are mutually exclusive.</para>
                    <para>Type: string</para>
                    <para>Required: Yes</para>
                </listitem>
            </itemizedlist>            
        </informalexample>
    </simplesect>           
    
<!-- management (/1/5) -->
    
    <simplesect>
        <title></title>
        <!--https://github.com/katzenpost/katzenpost/blob/c255fbbf421d5d9820553c18dc5dc6c9881ad547/server/config/config.go#L729-->
           <informalexample> 
           <para>Management is the &program_name; management interface configuration. The management section specifies connectivity information for the &program_name;
               control protocol which can be used to make configuration changes during
               run-time. An example configuration looks like this:</para>
           <programlisting>[Management]
   Enable = false
   Path = "/voting_mixnet/mix1/management_sock"</programlisting>
           <itemizedlist>
               <listitem>
                   <para><emphasis role="bold">Enable</emphasis></para>
                   <para>Enables the management interface if set to true.</para>
                   <para>Type: bool</para>
                   <para>Required: No</para>
               </listitem>
               <listitem>
                   <para><emphasis role="bold">Path</emphasis></para>
                   <para>Specifies the path to the management interface socket.
                       <?oxy_comment_start author="dwrob" timestamp="20240814T171718-0700" comment="Confusing wording."?>If
                       left empty, then management_sock will be used under the DataDir.</para><?oxy_comment_end?>
                   <para>Type: string</para>
                   <para>Required: No</para>
               </listitem>
           </itemizedlist>
       </informalexample>
    </simplesect> 
    
<!-- pki (/1/6)-->
        
    <simplesect>
        <title></title>     
        <informalexample> 
            <para>The PKI section contains the directory authority configuration for a mix, gateway, or service node.</para>
            <programlisting>[PKI]
[PKI.Voting]

    [[PKI.Voting.Authorities]]
        Identifier = "auth1"
        IdentityPublicKey = """-----BEGIN ED25519 PUBLIC KEY-----
tqN6tpOVotHWXKCszVn2kS7vAZjQpvJjQF3Qz/Qwhyg=
-----END ED25519 PUBLIC KEY-----
"""
        PKISignatureScheme = "Ed25519"
        LinkPublicKey = """-----BEGIN XWING PUBLIC KEY-----
JnJ8ztQEIjAkKJcpuZvJAdkWjBim/5G5d8yoosEQHeGJeeBqNPdm2AitUbpiQPcd
tNCo9DxuC9Ieqmsfw0YpV6AtOOsaInA6QnHDYcuBfZcQL5MU4+t2TzpBZQYlrSED
hPCKrAG+8GEUl6akseG371WQzEtPpEWWCJCJOiS/VDFZT7eKrldlumN6gfiB84sR
ufpZ9tVt04FOQTUOAiegt/OzI8MGfRKwd+iVBTKEHGotzoMWuaoDLJK9EHFUznFH
8pKyx2aI0aax8ymfDhFKoVd3Dvlw0fmjuslgsiS17YV61jCdyAdGQ6a9PUBy36Eq
wCsDwNg8pwKkXPZU6DYZC+ofeRnJZeE8ptar1eGav/xVztCCQmm0wCMpzZwHJCYs
K0NIGUjDO2gWzQapfNsKFoJoy6V+FMMeSpJ9HmoTEJLP+TA2LKizoFkwNcrMKKe2
ArBAwzx56gQCyhQiKMNR4QB0KFJ2J3Wo8tUV1MdbxvQUMreTa2ea6dTCu7FMM/gu
frcCT0kpcBipkXmzDvas4weAkxYhFqAy+GcZaFIBHbWBKdlEiDFXnsdhzehtIpkp
dsU51GR/jVG4ueSAQuNpjDafW1oAbEjIS1BhatFd6EYivCcPeTVVEMFIaLsxkidL
VxZjdUA66gcQkVmICaILIdJFfIY73faON4bPtAoUHJJsQtZHE+ZMLcy4bfm9CLu5
ZvdksLFrffyfOqdl4QWBXHJmsKJ4S4K1qfYgqDkKrEa/QDCnG9RhwHtaF1e3Wik3
ERAGZwyq90sNDMmQB+vPEzhqNxfOtGKK97UixRNagYhlgLLK0kIGM4nA1JgoubKf
ckSDa6XCCeVtrxBuSIyPDgVZzJi8kIwswhMszepyIGaUB/c12DZ45jfCEPeoOZKB
PkVs8BckiAikdwtuy+J+6ETIEmcNsAuM7ZJGbIJiSQuTCSO2Mlm7I7cao7FG43k1
OYuToRt44+Aw1npy/9BM8Aa5x5ICOJgJTcbFnyow/MK+iwUbJWMu/JlN7NhS7Zoc
e2yCwAM1eNxS3FJiMAFfTmMx0TUlo+Wj2CiwqcVoBud0PGiHtYSWtalHUDgoHUUv
/nvHx8U6EnqqgOiHmxaBvgu1XHWkpsWC1Lib0hCsTHGhB2CPSEEPJHBcK9hGLsgO
VTy7PQJ2+taFmpwMffg+QfRdljU5qCrN31iuC2UHCjJi67t+UquNe7WNemd813Z/
ZlW7PilppyiWLUqX4uk7pSGSQAi9OtiEpdlZMrwY/ydyhbpN35sI3iaIEyQmADvH
iOVujeoj8/R105oWr1xFJOcafuN5pdNGBscJUdQj7Gpkh5l5TtoIp+F6q7qxy+t1
txe9nkFVFPSdPqwXJ5Yk8DIvKdagSSljnJlLbffK/ruLqQMF3GUAm5JOxCJ44MF3
HTAhkec6M3V91QCi9xxtdepJWosh1OV0/xoOMMlwhTikhOQTn6AVLAqOohcZD+QT
arFh/WKwYJUj+aGBsFYSqGdzC6MdY4x/YyFe2ze0MJEjThQE91y1d/LCQ3Sb7Ri+
u6PBi3JU2qzlPEejDKwK0t5tMNEAkq8iNrpRTdD/hS0gR+ZIN8Z9QKh7Xf94FWG2
H+r8OaqImQhgHabrWRDyLg==
-----END XWING PUBLIC KEY-----
"""
        WireKEMScheme = "xwing"
        Addresses = ["127.0.0.1:30001"]

    [[PKI.Voting.Authorities]]
        Identifier = "auth2"
        IdentityPublicKey = """-----BEGIN ED25519 PUBLIC KEY-----
O51Ty2WLu4C1ETMa29s03bMXV72gnjJfTfwLV++LVBI=
-----END ED25519 PUBLIC KEY-----	
"""
        PKISignatureScheme = "Ed25519"
        LinkPublicKey = """-----BEGIN XWING PUBLIC KEY-----
TtQkg2XKUnY602FFBaPJ+zpN0Twy20cwyyFxh7FNUjaXA9MAJXs0vUwFbJc6BjYv
f+olKnlIKFSmDvcF74U6w1F0ObugwTNKNxeYKPKhX4FiencUbRwkHoYHdtZdSctz
TKy08qKQyCAccqCRpdo6ZtYXPAU+2rthjYTOL7Zn+7SHUKCuJClcPnvEYjVcJxtZ
nRPAfbVvEmuzrvifxpuiBJpFqVK5gyegv0d6QjNRUbOVSrxMu0dv6dag4AfF3Xoa
lEBwFQWFysWYZmQqUMOyhTNNxGZuEEHOpsVPAUKujfsXbFOOaTbBRebJ5cegr1aj
DWQBncpv4gMnpDFuK0sxjRBQoanC+qyrFYh0EjFmTCNUxhNtVAdleyqVV7k2vxDC
DcUOAIJM+AVWw7gp3NkD/yCD/aFiRZkrKLpeMJMTHHd3soGI+FdaVDl2jvQVIrmk
5gaJz4mD/WkoVpB2NisEZHpIXzE4PwdCZowEhjOBhLgkjPpFmcilwvl/pPyfWcy5
YqBCCNuxEmqEcdsW3LtiepwcojOMEvC/ZLGNGFedwrOnPjFiNGlfm0YkxYdwGJx3
HglhD5c4G9NVP0l6pAlg7WmvRCVpTVgnSZKPp2QwYsARDySGRVIT6oiKbSJ/5Yu2
rAQIDGRXBayioFjJdvm8YWCSramYazydqVS3ucSGRoCVNQmcR0aJDdekrEqyzgmE
JxwE0bw1VsETekkkmEw0S3WWTWsBCnuDGhfD+jgNMuSDMwqTkEZDp6Z2Zymzzguf
kQEojWUsByNIoTg3kvwKz3FpBJt76/kxhgkWPDrGWPmGRol9C/iuT6ZlnqMZiaoD
M4p7UPJABWsl3Mk2v9FBkHcyZOEXFsBIuGnNCThstucmMQSY2eFhH8aTl7aMWCBd
szdWg5oI+IUFPQgWQUg4l7e89TIV7JyA6Yu0Ehp62WWORbaIVotlMbWtF6oTJkCB
XCRWduKqaMl61ihG2mRehHNn+TA/oqgAWgyxRsN8jWJJqVzP/nmlExxaLVtuges3
aiy24flgmWNA9YoV49nLNLF1YKSzwNW1KSRy4rObRHq3t/OTAjO4CgqqmDZ6+cpo
LQJmFqJhF/UHR2GUPolUK/NT37e/aZPDjgiho7aYVKtZ57d9R2KviFGJyZW+VKBr
fbh9v4KyINTDB3s79iVUJTPCyeozYFVaQ4Ktu4CQTVCbC+eCkgGGvJi5Rro/Mytq
shyzvLNA+GicK8At0bJArXdeHrIjolLNrAyAMqKZNCViOgEM50ok4DhtkajCOKOD
tjifADQIkEGYl9uUXeCsXWCuW/Bxp4q1t7FSklZkqwQBbwcRfgqYIAkBWdESu4At
XWKVyceIOzShJEkieMyFmkEvymY+Ihos8eu5kVpCZLhv0zOrJMmdoclXyNcs5gbB
BtOBa2NFTAKMbLcanrmcXhFdQbhPROqnpUN7ObuX5vgqpvFut6OqPde61bcr3tsW
ubJIe5U4nMJbBkOqr7Kq6niaEkiLODa0tkpB8tKMYTMBdcYyHSXCzpo7U9sb6LAR
HktiTBDtRXviu2vbw7VRXhkMW2kjYZDtReQ5sAse04DvmD49zgTp1YxYW+wWFaL3
37X7/SNuLdHX4PHZXIWHBQ==
-----END XWING PUBLIC KEY-----	
"""
        WireKEMScheme = "xwing"
        Addresses = ["127.0.0.1:30002"]

    [[PKI.Voting.Authorities]]
        Identifier = "auth3"
        IdentityPublicKey = """-----BEGIN ED25519 PUBLIC KEY-----
zQvydRYJq3npeLcg1NqIf+SswEKE5wFmiwNsI9Z1whQ=
-----END ED25519 PUBLIC KEY-----
"""
        PKISignatureScheme = "Ed25519"
        LinkPublicKey = """
-----BEGIN XWING PUBLIC KEY-----
OYK9FiC53xwZ1VST3jDOO4tR+cUMSVRSekmigZMChSjDCPZbKut8TblxtlUfc/yi
Ugorz4NIvYPMWUt3QPwS2UWq8/HMWXNGPUiAevg12+oV+jOJXaJeCfY24UekJnSw
TNcdGaFZFSR0FocFcPBBnrK1M2B8w8eEUKQIsXRDM3x/8aRIuDif+ve8rSwpgKeh
xqkpdmXDCMuVYLpghyaAYgdtQCdQrarItSjEiQEVtHMdTYTPC4N+aDhelMs7DpOR
B8RoVgE29wdy5egz9lRax9LJOne2i8jNMhckkiA9cUIOZsBAgJpMy2e+sqiAVzek
KeRe2TQMgaM1hbiMsLK1Iiw4QidDaUqkr1ZqmRS95DZ1HAS/xtUxBjXPaxBqHNmo
wmvHXtYGlYS6/+UE0HdRr/Mb6hOb1EFKJ8oBAeFR9hG6+eg7WXyHBnOMvApPe0Js
PRIY2dGUFwCSGcDEESApf2iyBsMgb4XPwEO9apaX9AZmbAmEeiPKySBhA9vJQKm1
wIs22bQTJXdZKlU1mvdB+hy9+zhwbHeVzzCWc6UkdZDKNERcaloJMSUh14iQW9qc
LUWAczdZvYqHwToodDcE8PkAfFmKWlM8Uhi654tPARwO9piBjCYPgIlvjNStD9Y/
B9ZmvrI4GVZP/ZFkaHoKSdJxi4Jj6QE3LLaP1qwjupJhNOu4l8AEfMu2VwmwVkJ7
SIIHPSV80mxvoSIgT+YNCTI+oxmHN2J51EJ610Rn7kh1bFUKf4GnUFJTEEFUD1ay
G4ymMJbH4QaC3BsT47BV+RVd2SSqLlasRqqv5LImcYM9h6aGWAmZY9cz8KY/ZBLN
t6EJx2B7kLwYV/lniobH/2tF9rKdfWpm79IugEtLy6kLNvSOERc1xIN1X4aGcewR
snCWR0CiT0el8RgRYgFKEdWhccJs+gE0dLyegOBikdduAbeDiSNR/EKaChgwn3w0
upsutfV8WvheQ5w1KidL0hl/rLKVkrqV2DVtsPp4d0WhLHyLaxQM3VJ7Y4quMjUF
3/Y43dLOrbgVVaBpA4TCtoYPEztyYOjJyjbJ+niAHYmpBPG4BjeioSGBjsARYnsl
kndLQjx/r4mvxXXJaRVDPAc5C/jFbDIfS6NRUdAJ//OJLaJaQJWJWTgF7fE4LvOX
DiWu1wxkhISJrscFxtsHGJFqlRy4YqcqASuh+YeeERIeSOUHz4Ar2MkuC+Q9vRvH
MOVo+XEbMSG6ZaSAEMOw8Au7kbGA/vmVPPJQXxYvjvCzjlPKnaiSSmvA2rQVJwYZ
YHR+5ZwOJprIWWlch+xUfwZe3EBqeGuKABA39iPKFkY1BhFGExhW2rjBcgMk0NRG
4ci5yOvGuTYjUywrVcoiJDUqkjuxqLNtFPMOINSqwGeqKhlpDaFKWYKwubK9a2AG
13ivg4leANvMnUaztWhyYEg/zrqF0pq7ZXpLj7BTk1BBbvILGuHPd1hhGzA19utq
OdVD3yw7OOS8uPZLORGQFyJbHtVmFPVvwja4G/o2gntAoHUZ2LiJJakpVhhlSyrI
yuzvwwFtZVfWtNb5gAKZCyg0aduR3qgd7MPerRF+YopZk3OCRpC02YxfUZrHv398
FZWJFK0R8iU52CEUxVpXTA==
-----END XWING PUBLIC KEY-----	
"""
        WireKEMScheme = "xwing"
        Addresses = ["127.0.0.1:30003"]</programlisting>
            <itemizedlist>
                <listitem>
                    <para><emphasis role="bold">Identifier</emphasis></para>
                    <para>Specifies the human-readable identifier for a node, and must be unique per mixnet. 
                    Identifier can be an FQDN but does not have to be.</para>
                    <para>Type: string</para>
                    <para>Required: Yes</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">IdentityPublicKey</emphasis></para>
                    <para>String containing the node&apos;s public identity key in PEM format. IdentityPublicKey is 
                    the node&apos;s permanent identifier and is used to verify cryptographic signatures produced 
                    by its private identity key.</para>
                    <para>Type: string</para>
                    <para>Required: Yes</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">PKISignatureScheme</emphasis></para>
                    <para>Specifies the cryptographic signature scheme which will be used by all components of 
                    the mix network when interacting with the PKI system. Mix nodes sign their descriptors using 
                    this signature scheme, and dirauth nodes similarly sign PKI documents using this signature scheme.</para>
                    <para>Type: string</para>
                    <para>Required: Yes</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">LinkPublicKey</emphasis></para>
                    <para>String containing the peer&apos;s public link-layer key in PEM format. LinkPublicKey must match the specified WireKEMScheme.</para>
                    <para>Type: string</para>
                    <para>Required: Yes</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">WireKEMScheme</emphasis></para>
                    <para>WireKEMScheme is the wire protocol KEM scheme to use.</para>
                    <para>Type: string</para>
                    <para>Required: Yes</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Addresses</emphasis></para>
                    <para>Specifies a list of one or more Address URLs in a format that contains the transport protocol, 
                    IP address, and port number that the server will bind to for incoming connections. EchoMix supports 
                    URLs with that start with either "tcp://" or "quic://" such as: ["tcp://192.168.1.1:30001"] 
                    and ["quic://192.168.1.1:40001"].</para>
                    <para>Type: []string</para>
                    <para>Required: Yes</para>
                </listitem>
            </itemizedlist>                            
        </informalexample>
    </simplesect> 
    
<!-- serverdebug (/1/7) -->
    
    <simplesect>
        <title></title>     
        <informalexample>    
            <para>Debug is the &program_name; server debug configuration for advanced tuning.</para>   
            <programlisting>[Debug]
                NumSphinxWorkers = 16
                NumServiceWorkers = 3
                NumGatewayWorkers = 3
                NumKaetzchenWorkers = 3
                SchedulerExternalMemoryQueue = false
                SchedulerQueueSize = 0
                SchedulerMaxBurst = 16
                UnwrapDelay = 250
                GatewayDelay = 500
                ServiceDelay = 500
                KaetzchenDelay = 750
                SchedulerSlack = 150
                SendSlack = 50
                DecoySlack = 15000
                ConnectTimeout = 60000
                HandshakeTimeout = 30000
                ReauthInterval = 30000
                SendDecoyTraffic = false
                DisableRateLimit = false
                GenerateOnly = false</programlisting>
                <itemizedlist>
                    <listitem>
                        <para><emphasis role="bold">NumSphinxWorkers</emphasis></para>
                        <para> specifies the number of worker instances to use for inbound Sphinx
                            packet processing.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>[
                    <listitem>
                        <para><emphasis role="bold">NumProviderWorkers</emphasis></para>
                        <para> specifies the number of worker instances to use for provider specific
                            packet processing.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">NumKaetzchenWorkers</emphasis></para>
                        <para> specifies the number of worker instances to use for Kaetzchen
                            specific packet processing.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">SchedulerExternalMemoryQueue</emphasis></para>
                        <para> will enable the experimental external memory queue that is backed by
                            disk.</para>
                        <para>Type: bool</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">SchedulerQueueSize</emphasis></para>
                        <para> is the maximum allowed scheduler queue size before random entries
                            will start getting dropped. A value &lt;= 0 is treated as
                            unlimited.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">SchedulerMaxBurst</emphasis></para>
                        <para> is the maximum number of packets that will be dispatched per
                            scheduler wakeup event.</para>
                        <para>Type: </para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">UnwrapDelay</emphasis></para>
                        <para> is the maximum allowed unwrap delay due to queueing in
                            milliseconds.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">GatewayDelay</emphasis></para>
                        <para>the maximum allowed gateway node worker delay due to queueing</para>
                        <para> in milliseconds.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">ServiceDelay</emphasis></para>
                        <para> is the maximum allowed provider delay due to queueing in
                            milliseconds.</para>
                        <para>Type: int</para>
                        <para>Required: No</para> 
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">KaetzchenDelay</emphasis></para>
                        <para> is the maximum allowed kaetzchen delay due to queueing in
                            milliseconds.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">SchedulerSlack</emphasis></para>
                        <para> is the maximum allowed scheduler slack due to queueing and or
                            processing in milliseconds.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">SendSlack</emphasis></para>
                        <para> is the maximum allowed send queue slack due to queueing and or
                            congestion in milliseconds.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">DecoySlack</emphasis><emphasis role="bold"
                            /></para>
                        <para> is the maximum allowed decoy sweep slack due to various external
                            delays such as latency before a loop decoy packet will be considered
                            lost.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">ConnectTimeout</emphasis></para>
                        <para> specifies the maximum time a connection can take to establish a
                            TCP/IP connection in milliseconds.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">HandshakeTimeout</emphasis></para>
                        <para> specifies the maximum time a connection can take for a link protocol
                            handshake in milliseconds.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">ReauthInterval</emphasis></para>
                        <para> specifies the interval at which a connection will be reauthenticated
                            in milliseconds.</para>
                        <para>Type: int</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">SendDecoyTraffic</emphasis></para>
                        <para>enables sending decoy traffic. This is still experimental and untuned
                            and thus is disabled by default. WARNING: This option will go away once
                            decoy traffic is more concrete.</para>
                        <para>Type: bool</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">DisableRateLimit</emphasis></para>
                        <para> disables the per-client rate limiter. This option should only be used
                            for testing.</para>
                        <para>Type: bool</para>
                        <para>Required: No</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">GenerateOnly</emphasis></para>
                        <para> halts and cleans up the server right after long term key
                            generation.</para>
                        <para>Type: bool</para>
                        <para>Required: No</para>
                    </listitem>
                </itemizedlist>
        </informalexample> 
    </simplesect>
</chapter>
